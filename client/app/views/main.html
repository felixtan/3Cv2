<!-- Collapsed car list becomes a button -->
<div class='col-md-offset-2 col-md-1 col-collapsed' ng-show='driverListCollapsed' ng-click="reload()" type='button'>
  <div class='row row-collapsed'>
    <p class='fa fa-caret-right fa-3x btn-expand'></p>
  </div>
</div>

<!-- Collapsed prospect list becomes a button -->
<div class='col-md-offset-11 col-md-1 col-collapsed' ng-show='prospectListCollapsed' ng-click="reload()" type='button'>
  <div class='row row-collapsed'>
    <p class='fa fa-caret-left fa-3x btn-expand'></p>
  </div>
</div>

<div ng-class="{ 'col-md-9' : prospectListCollapsed, 'col-md-5' : !prospectListCollapsed  }" class='col-md-offset-2 col-collapsible' id='car-list' ng-model='cars' collapse='driverListCollapsed' if-user>
  
  <h2 class='sub-header'>
    Cars
    <span class='btn-collapse' ng-show='!prospectListCollapsed'>
      <i class='fa fa-caret-left btn-collapse' type='button' ng-click='driverListCollapsed = !driverListCollapsed'></i>
    </span>
  </h2>  

  <div class='row car-list-actions'>
    <div class='col-md-1' ng-controller="CarFormModalCtrl">
      <button type='button' class='btn btn-success' data-toggle='modal' ng-click='open(lg)'>+</button>
    </div>
  </div>

  <div class="table-responsive car" ng-repeat='car in cars'>
    <table class="table">
      <tbody>
        <div class="table-responsive">
          <table class="table">
            <thead>
              <h3>
                <span class='drag-handle-car'>
                  ::
                </span> 
                <span ng-class="{'bg-danger' : car.oilChangeRequired}">{{ car.tlcNumber }}</span>
                <span>
                  <button class='btn btn-xs btn-warning' ng-click='main.oilChanged(car.id)' ng-show='car.oilChangeRequired'>
                    Oil Changed
                  </button>
                </span>
              </h3>
              <th></th>
              <th>Name</th>
              <th>Gas Card</th>
              <th>EZ Pass</th>
              <th>Notes</th>
              <th>TLC</th>
              <th>DMV</th>
              <th>Points</th>
              <th>Accidents</th>
              <th>Shift</th>
              <th>Address</th>
            </thead>
            <tbody class='driver-list' data-list='driver' data-carid='{{ car.id }}' ng-model='car.Drivers'>
              <tr class='dropfix'>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
                <td></td>
              </tr>
              <tr class='driver-row' ng-repeat='driver in car.Drivers' data-id='{{ driver.id }}' data-currentCarId='{{ car.id }}'>
                <td>
                  <ul class='row-actions'>
                    <li class='drag-handle'>::</li>
                    <li class='filler'> </li>
                    <li type='button' class='fa fa-pencil-square-o' data-toggle='modal' ng-controller='PersonEditFormModalCtrl' ng-click='open(lg, driver, "Driver")'></li>
                  </ul>
                </td>
                <td>
                    {{ driver.givenName }} {{ driver.middleInitial }} {{ driver.surName }}
                </td>
                <td>
                    {{ driver.GasCards[0].number }}
                </td>
                <td>
                    {{ driver.EzPasses[0].number }}
                </td>
                <td>
                    {{ driver.description }}
                </td>
                <td>
                    {{ driver.tlc }}
                </td>
                <td>
                    {{ driver.dmv }}
                </td>
                <td>
                    {{ driver.points }}
                </td>
                <td>
                    {{ driver.accidents }}
                </td>
                <td>
                    {{ driver.shift }}
                </td>
                <td>
                    {{ driver.address }}
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </tbody>
    </table>
  </div>
</div>

<div ng-class="{ 'col-md-offset-3' : driverListCollapsed, 'col-md-9' : driverListCollapsed, 'col-md-5' : !driverListCollapsed }" id='prospect-list' ng-model='prospects' collapse='prospectListCollapsed' class='col-collapsible' if-user>

  <h2 class='sub-header'>
    Prospects
    <span class='btn-collapse' ng-show='!driverListCollapsed'>
      <i class='fa fa-caret-right' type='button' ng-click='prospectListCollapsed = !prospectListCollapsed'></i>
    </span>
  </h2>

  <div class='row'>
    <div class='col-md-5 prospect-actions' ng-controller="ProspectFormModalCtrl">
      
      <button type='button' class='btn btn-success' data-toggle='modal' ng-click='open(lg)'>+</button>
    </div>
  </div>

  <div class='table-responsive' ng-repeat='status in prospectStatuses'>
    <table class='table'>
      <thead>
        <h3>{{ status }}</h3>
        <th></th>
        <th>Name</th>
        <th>Notes</th>
        <th>TLC</th>
        <th>DMV</th>
        <th>Points</th>
        <th>Accidents</th>
        <th>Shift</th>
        <th>Address</th>
      </thead>
      <tbody class='prospect-status' data-status='{{ status }}' data-list='prospect'>
          <tr class='dropfix'>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
            <td></td>
          </tr>
          <tr ng-repeat="prospect in prospects | filter:status" data-id='{{ prospect.id }}' data-status='{{ prospect.status }}' repeat-finished>
            <td>
              <ul class='row-actions'>
              <li class='drag-handle'>::</li>
              <li class='filler'> </li>
              <li type='button' class='fa fa-pencil-square-o' data-toggle='modal' ng-controller='PersonEditFormModalCtrl' ng-click='open(lg, prospect, "Prospect")'>
              </li>  
            </ul>
            </td>
            <td>
                {{ prospect.givenName }} {{ prospect.middleInitial }} {{ prospect.surName }}
            </td>
            <td>
                {{ prospect.description }}
            </td>
            <td>
                {{ prospect.tlc }}
            </td>
            <td>
                {{ prospect.dmv }}
            </td>
            <td>
                {{ prospect.points }}
            </td>
            <td>
                {{ prospect.accidents }}
            </td>
            <td>
                {{ prospect.shift }}
            </td>
            <td>
                {{ prospect.address }}
            </td>
          </tr>
      </tbody>
    </table>
  </div>
</div>

<!-- Card form modal view -->
<!-- TODO: put it in a different file -->
<script type="text/ng-template" id="cardformmodal">
  <div class="modal-header">
      <h3 class="modal-title">Add Card</h3>
      <button type="button" class='close' ng-click='close()' style='margin-top:-35px;'>&times;</button>
  </div>
  <div class='modal-body'>
    <form novalidate role='form' id='newCardForm'>
      <div class='form-group'>
        <label for='type'>Type</label>
        <select class='form-control' ng-model='formData.type'>
            <option> - </option>
            <option ng-repeat='type in typeNames' value='{{ type }}'>{{ type }} </option>
        </select>
      </div>
      <div class='form-group'>
          <label for='number'>Number</label>
          <input type='text' class='form-control' ng-model='formData.number' placeholder=''>
      </div>
      <div class='form-group' ng-show="formData.type === 'Gas Card'">
          <label for='name'>Name</label>
          <input type='text' class='form-control' ng-model='formData.name' placeholder=''>
      </div>
    </form>
  </div>
  <div class="modal-footer">
      <button class="btn btn-success" type="button" ng-click="submit()">Submit</button>
      <button class="btn btn-danger" type="button" ng-click="reset()">Reset</button>
      <button class='btn btn-default' type='button' ng-click='close()'>Close</button>
  </div>
</script>

<!-- Driver form modal view -->
<!-- TODO: put it in a different file -->
<script type="text/ng-template" id="driverformmodal">
  <div class="modal-header">
      <h3 class="modal-title">Add Driver</h3>
      <button type="button" class='close' ng-click='close()' style='margin-top:-35px;'>&times;</button>
  </div>
  <div class="modal-body">
    <form novalidate role='form' id='newDriverForm'>
      <div class='form-group'>
        <label for='givenName'>First</label>
        <input type='text' class='form-control' ng-model='formData.givenName' placeholder='John'>
      </div>
      <div class='form-group'>
        <label for='middleInitial'>Middle</label>
        <input type='text' class='form-control' ng-model='formData.middleInitial' placeholder='H'>
      </div>
      <div class='form-group'>
        <label for='surName'>Last</label>
        <input type='text' class='form-control' ng-model='formData.surName' placeholder='Doe'>
      </div>
      <div class='form-group'>
            <label for='email'>Email</label>
            <input type='text' class='form-control' ng-model='formData.email' placeholder=''>
        </div>
        <div class='form-group'>
            <label for='phoneNumber'>Phone Number</label>
            <input type='text' class='form-control' ng-model='formData.phoneNumber' placeholder=''>
        </div>
        <div class='form-group'>
            <label for='address'>Address</label>
            <input type='text' class='form-control' ng-model='formData.address' placeholder=''>
        </div>
        <div class='form-group'>
            <label for='driversLicenseNum'>Driver License Number</label>
            <input type='text' class='form-control' ng-model='formData.driversLicenseNum' placeholder=''>
        </div>
        <div class='form-group'>
          <label for='tlc'>TLC</label>
          <input type='text' class='form-control' ng-model='formData.tlc'>
        </div>
        <div class='form-group'>
          <label for='dmv'>DMV</label>
          <input type='text' class='form-control' ng-model='formData.dmv'>
        </div>
        <div class='form-group'>
          <label for='points'>Points</label>
          <input type='text' class='form-control' ng-model='formData.points'>
        </div>
        <div class='form-group'>
          <label for='accidents'>Accidents</label>
          <input type='text' class='form-control' ng-model='formData.accidents'>
        </div>
        <div class='form-group'>
          <label for='shift'>Shift</label>
          <input type='text' class='form-control' ng-model='formData.shift'>
        </div>
        <div class='form-group'>
          <label for='paperwork'>Paperwork</label>
          <input type='text' class='form-control' ng-model='formData.paperwork'>
        </div>
        <div class='form-group'>
          <label for='payRate'>Pay Rate (%)</label>
          <input type='text' class='form-control' ng-model='formData.payRate'>
        </div>
        <div class='form-group'>
          <label for='car'>Car</label>
          <select class='form-control' ng-model='formData.carId'>
              <option> - </option>
              <option ng-repeat='car in cars' value='{{ car.id }}'>{{ car.tlcNumber }}</option>
          </select>
        </div>
        <label for='description'>Description</label>
        <textarea ng-model='formData.description' type='text' class='form-control' rows='5'>
        </textarea>
    </form>
  </div>
  <div class="modal-footer">
      <button class="btn btn-success" type="button" ng-click="submit()">Submit</button>
      <button class="btn btn-danger" type="button" ng-click="reset()">Reset</button>
      <button class='btn btn-default' type='button' ng-click='close()'>Close</button>
  </div>
</script>

<!-- Prospect form modal view -->
<!-- TODO: put it in a different file -->
<script type="text/ng-template" id="newprospectformmodal">
  <div class="modal-header">
      <h3 class="modal-title">Add Caller</h3>
      <button type="button" class='close' ng-click='close()' style='margin-top:-35px;'>&times;</button>
  </div>
  <div class="modal-body">
    <form novalidate role='form' id='newProspectForm'>
      <div class='form-group'>
        <label for='status'>Status</label>
        <select class='form-control' ng-model='formData.status'>
            <option> - </option>
            <option ng-repeat='status in prospectStatuses' value='{{ status }}'>{{ status }}</option>
        </select>
      </div>
      <div class='form-group'>
        <label for='givenName'>First</label>
        <input type='text' class='form-control' ng-model='formData.givenName' placeholder='John'>
      </div>
      <div class='form-group'>
        <label for='middleInitial'>Middle</label>
        <input type='text' class='form-control' ng-model='formData.middleInitial' placeholder='H'>
      </div>
      <div class='form-group'>
        <label for='surName'>Last</label>
        <input type='text' class='form-control' ng-model='formData.surName' placeholder='Doe'>
      </div>
      <div class='form-group'>
            <label for='email'>Email</label>
            <input type='text' class='form-control' ng-model='formData.email' placeholder=''>
        </div>
        <div class='form-group'>
            <label for='phoneNumber'>Phone Number</label>
            <input type='text' class='form-control' ng-model='formData.phoneNumber' placeholder=''>
        </div>
        <div class='form-group'>
            <label for='address'>Address</label>
            <input type='text' class='form-control' ng-model='formData.address' placeholder=''>
        </div>
        <div class='form-group'>
            <label for='driversLicenseNum'>Driver License Number</label>
            <input type='text' class='form-control' ng-model='formData.driversLicenseNum' placeholder=''>
        </div>
        <div class='form-group'>
          <label for='tlc'>TLC</label>
          <input type='text' class='form-control' ng-model='formData.tlc'>
        </div>
        <div class='form-group'>
          <label for='dmv'>DMV</label>
          <input type='text' class='form-control' ng-model='formData.dmv'>
        </div>
        <div class='form-group'>
          <label for='points'>Points</label>
          <input type='text' class='form-control' ng-model='formData.points'>
        </div>
        <div class='form-group'>
          <label for='accidents'>Accidents</label>
          <input type='text' class='form-control' ng-model='formData.accidents'>
        </div>
        <div class='form-group'>
          <label for='shift'>Shift</label>
          <input type='text' class='form-control' ng-model='formData.shift'>
        </div>
        <div class='form-group'>
          <label for='paperwork'>Paperwork</label>
          <input type='text' class='form-control' ng-model='formData.paperwork'>
        </div>
        <label for='description'>Description</label>
        <textarea ng-model='formData.description' type='text' class='form-control' rows='5'>
        </textarea>
    </form>
  </div>
  <div class="modal-footer">
      <button class="btn btn-success" type="button" ng-click="submit()">Submit</button>
      <button class="btn btn-danger" type="button" ng-click="reset()">Reset</button>
      <button class='btn btn-default' type='button' ng-click='close()'>Close</button>
  </div>
</script>

<!-- Car form modal view -->
<!-- TODO: put it in a different file -->
<script type="text/ng-template" id="carformmodal">
  <div class="modal-header">
      <h3 class="modal-title">Add Car</h3>
      <button type="button" class='close' ng-click='close()' style='margin-top:-35px;'>&times;</button>
  </div>
  <div class="modal-body">
    <form novalidate role='form' id='newCarForm'>
      <div class='form-group'>
        <label for='tlcNumber'>TLC Number</label>
        <input type='text' class='form-control' ng-model='formData.tlcNumber'>
      </div>
      <div class='form-group'>
        <label for='licensePlateNumber'>License Plate Number</label>
        <input type='text' class='form-control' ng-model='formData.licensePlateNumber'>
      </div>
      <div class='form-group'>
            <label for='mileage'>Mileage</label>
            <input type='text' class='form-control' ng-model='formData.mileage' placeholder=''>
      </div>
      <div class='form-group'>
        <label for='driver'>Driver</label>
        <select class='form-control' ng-model='formData.driverId' placeholder='Select Driver'>
            <option> - </option>
            <option ng-repeat='driver in drivers' value='{{ driver.id }}'>{{ driver.givenName }} {{ driver.surName }}</option>
        </select>
      </div>
      <label for='description'>Description</label>
      <textarea ng-model='formData.description' type='text' class='form-control' rows='5'>
      </textarea>
    </form>
  </div>
  <div class="modal-footer">
      <button class="btn btn-success" type="button" ng-click="submit()">Submit</button>
      <button class="btn btn-danger" type="button" ng-click="reset()">Reset</button>
      <button class='btn btn-default' type='button' ng-click='close()'>Close</button>
  </div>
</script>

<!-- Pay rate modal view -->
<!-- TODO: put it in a different file -->
<script type="text/ng-template" id="payRateModal">
  <div class='modal-header'>
    <h3 class="modal-title">Enter Pay Rate</h3>
    <button type="button" class='close' ng-click='close()' style='margin-top:-35px;'>&times;</button>
  </div>
  <div class='modal-body'>
    <form novalidate role='form' name='payRateForm'>
      <div class='form-group'>
        <label for='payRate'>Pay Rate (%)</label>
        <input type='text' class='form-control' ng-model='payRate'>
      </div>
    </form>
  </div>
  <div class='modal-footer'>
    <button class="btn btn-success" type="button" ng-click="submit()">Submit</button>
    <button class='btn btn-default' type='button' ng-click='close()'>Close</button>
  </div>
</script>

<script type="text/ng-template" id="personEditFormModal">
  <div class='modal-header'>
    <h3 class='modal-title'>
      Edit {{ typeOfPerson }}
    </h3>
    <button type='button' class='close' ng-click='close()' style='margin-top:-35px;'>
      &times;
    </button>
    <div class='modal-body'>
      <form novalidate role='form' name='personEditForm'>

        <div class='form-group' ng-show='typeOfPerson === "Prospect"'>
          <label for='status'>Status</label>
          <select class='form-control' ng-model='formData.status'>
              <option> - </option>
              <option ng-repeat='status in prospectStatuses' value='{{ status }}'>{{ status }}</option>
          </select>
        </div>

        <div class='form-group' ng-show='typeOfPerson === "Driver"'>
          <label for='car'>Car</label>
          <select type='text' class='form-control' ng-options='car.tlcNumber for car in cars' ng-model='formData.car'>
          </select>
        </div>

        <div class='form-group' ng-show='typeOfPerson === "Driver"'>
          <label for='gasCard'>Gas Card</label>
          <select type='text' class='form-control' ng-options='card.number for card in gasCards' ng-model='formData.gasCard'>
          </select>
        </div>

        <div class='form-group' ng-show='typeOfPerson === "Driver"'>
          <label for='ezPass'>EZ Pass</label>
          <select type='text' class='form-control' ng-options='pass.number for pass in ezPasses' ng-model='formData.ezPass'>
          </select>
        </div>

        <div class='form-group' ng-show='typeOfPerson === "Driver"'>
          <label for='payRate'>Pay Rate</label>
          <input type='text' class='form-control' ng-model='formData.payRate' placeholder='Number ex. 0-100'>
        </div>

        <div class='form-group'>
          <label for='givenName'>First</label>
          <input type='text' class='form-control' ng-model='formData.givenName' placeholder='John'>
        </div>

        <div class='form-group'>
          <label for='middleInitial'>Middle</label>
          <input type='text' class='form-control' ng-model='formData.middleInitial' placeholder='H'>
        </div>

        <div class='form-group'>
          <label for='surName'>Last</label>
          <input type='text' class='form-control' ng-model='formData.surName' placeholder='Doe'>
        </div>

        <div class='form-group'>
            <label for='email'>Email</label>
            <input type='text' class='form-control' ng-model='formData.email' placeholder='xyz@email.com'>
        </div>

        <div class='form-group'>
            <label for='phoneNumber'>Phone Number</label>
            <input type='text' class='form-control' ng-model='formData.phoneNumber' placeholder='6461234567'>
        </div>

        <div class='form-group'>
            <label for='address'>Address</label>
            <input type='text' class='form-control' ng-model='formData.address' placeholder='1600 Pennsylvania Ave NW, Washington, DC 20500'>
        </div>
        <div class='form-group'>
            <label for='driversLicenseNum'>Driver License Number</label>
            <input type='text' class='form-control' ng-model='formData.driversLicenseNum' placeholder='123456789'>
        </div>
        <div class='form-group'>
          <label for='tlc'>TLC</label>
          <input type='text' class='form-control' ng-model='formData.tlc'>
        </div>
        <div class='form-group'>
          <label for='dmv'>DMV</label>
          <input type='text' class='form-control' ng-model='formData.dmv'>
        </div>
        <div class='form-group'>
          <label for='points'>Points</label>
          <input type='text' class='form-control' ng-model='formData.points' placeholder='Number ex. 12'>
        </div>
        <div class='form-group'>
          <label for='accidents'>Accidents</label>
          <input type='text' class='form-control' ng-model='formData.accidents' placeholder='Number ex. 0'>
        </div>
        <div class='form-group'>
          <label for='shift'>Shift</label>
          <input type='text' class='form-control' ng-model='formData.shift' placeholder='24/7'>
        </div>
        <div class='form-group'>
          <label for='paperwork'>Paperwork</label>
          <input type='text' class='form-control' ng-model='formData.paperwork'>
        </div>
        <label for='description'>Notes</label>
        <textarea ng-model='formData.description' type='text' class='form-control' rows='5' placeholder='Upstanding guy.'>
        </textarea>
      </form>
    </div>
    <div class="modal-footer">
      <button class="btn btn-success" type="button" ng-click="submit()">Submit</button>
      <button class="btn btn-danger" type="button" ng-click="reset()">Reset</button>
      <button class='btn btn-default' type='button' ng-click='close()'>Close</button>
    </div>
  </div>
</script>

