"use strict";angular.module("clientApp",["ngAnimate","ngCookies","ngResource","ngRoute","ngSanitize","ngTouch","xeditable","ng-sortable","ui.bootstrap","stormpath","stormpath.templates","ui.router","ngMessages"]).config(["$stateProvider","$urlRouterProvider","$provide",function(a,b,c){c.decorator("$state",["$delegate","$stateParams",function(a,b){return a.forceReload=function(){return a.go(a.current,b,{reload:!0,inherit:!1,notify:!0})},a}]),b.otherwise("/login"),a.state("login",{url:"/login",templateUrl:"views/login.html"}).state("logout",{url:"/logout",templateUrl:"views/logout.html",controller:"LogoutCtrl"}).state("register",{url:"/register",templateUrl:"views/register.html"}).state("passwordResetRequest",{url:"/password/requestReset",templateUrl:"views/passwordresetrequest.html"}).state("passwordReset",{url:"/password/reset",templateUrl:"views/passwordreset.html"}).state("main",{url:"/",templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main",resolve:{getCarsAndDrivers:["dataService",function(a){return a.getAss()}],getProspects:["dataService",function(a){return a.getProspects()}],getGasCards:["dataService",function(a){return a.getGasCards()}],getEzPasses:["dataService",function(a){return a.getEzPasses()}]},sp:{authenticate:!0}}).state("ptg",{url:"/pay-toll-gas",templateUrl:"views/ptg.html",controller:"PtgCtrl",controllerAs:"ptg",resolve:{getPtgLogs:["dataService",function(a){return a.getPtgLogs()}],basicDriverData:["dataService",function(a){return a.getDrivers()}]},sp:{authenticate:!0}}).state("maintenance",{url:"/maintenance",templateUrl:"views/maintenanceLogs.html",controller:"MaintenanceLogsCtrl",controllerAs:"maintenance",resolve:{getMaintenanceLogs:["dataService",function(a){return a.getMaintenanceLogs()}],basicCarData:["dataService",function(a){return a.getCars()}]},sp:{authenticate:!0}})}]).run(["editableOptions","$stormpath",function(a,b){a.theme="bs3",b.uiRouter({loginState:"login",defaultPostLoginState:"main",forbiddenState:"login",autoRedirect:!0})}]),angular.module("clientApp").controller("MainCtrl",["$state","getEzPasses","getGasCards","$modal","$filter","$q","$http","$scope","getProspects","getCarsAndDrivers",function(a,b,c,d,e,f,g,h,i,j){h.ezPasses=b.data,h.gasCards=c.data,h.carListCollapsed=!1,h.cars=j.data,h.prospects=i.data,h.prospectStatuses=["Callers","Interviewed","Waiting List","Rejected"],h.sortableConfigs=[],h.reload=function(){a.forceReload()},h.collapse=function(a){if("driver"===a){var b=angular.element("form.driverRowForm");b.$cancel()}else{var c=angular.element("form.prospectRowForm");c.$cancel()}},this.oilChanged=function(b){g.put("/api/cars/"+b,{oilChangeRequired:!1}).then(function(){a.forceReload()})["catch"](function(a){console.error(a)})},h.keypress=function(a,b){13===a.which&&b.$submit()},h.updateRow=function(b){var c={},d=d||f.defer();return b.status?c=g.put("/api/prospects/"+b.id,b):b.payRate&&(c=g.put("/api/drivers/"+b.id,b)),c.then(function(b){d.resolve(b),setTimeout(function(){a.forceReload()},100)},function(a){d.reject(a)}),d.promise},h.deleteRow=function(b){var c="";b.payRate?c="driver":b.status?c="prospect":console.error("Failed to delete.",b),g["delete"]("/api/"+c+"s/"+b.id).then(function(){a.forceReload()},function(a){console.error(a)})},h.getCarListElem=function(){return f(function(a,b){a(angular.element("#car-list")[0]),b(new Error("Failed to get car list element."))})},h.getProspectListElems=function(){return f(function(a,b){a(angular.element(".prospect-status")),b(new Error("Failed to get list elements."))})},h.getDriverListElems=function(){return f(function(a,b){a(angular.element(".driver-list")),b(new Error("Failed to get driver list elements."))})},h.updateProspectStatus=function(a,b){g.put("/api/prospects/"+a,{status:b}).then(function(){},function(a){console.error(a)})},h.filterProspectData=function(a){return f(function(b,c){d.open({templateUrl:"views/payRateModal.html",controller:"PayRateModalInstanceCtrl"}).result.then(function(d){var f=e("filter")(h.prospects,function(b){return b.id===a})[0];f.payRate=d,delete f.status,delete f.$$hashKey,delete f.createdAt,delete f.id,delete f.updatedAt,delete f.userId,b(f),c(new Error("Failed to filter prospect data before promoting to driver."))},function(a){console.error(a)})})},h.getCarId=function(a){return f(function(b,c){b(parseInt(angular.element(a).parent().data("carid"))),c(new Error("Failed to get car id for new driver."))})},h.getCarInScope=function(a){return f(function(b,c){b(e("filter")(h.cars,function(b){return b.id===a})[0]),c(new Error("Failed to extract car data for updating the scope."))})},h.updateDriverAssignment=function(a,b,c){g.put("/api/assignments/drivers/"+a,{oldCar:b,newCar:c}).then(function(a){console.log(a.data.msg)},function(a){console.error(a)})},h.$on("repeatFinished",function(){angular.element(".editable-buttons").remove(),h.getProspectListElems().then(function(b){[].forEach.call(b,function(b){h.sortableConfigs.push(new Sortable(b,{group:"prospects",draggable:"tr",handle:".drag-handle",animation:150,onEnd:function(b){var c=angular.element(b.item).data("id"),d=angular.element(b.item).parent().data("list");if("prospect"===d){var e=angular.element(b.item).data("status").toLowerCase(),f=angular.element(b.item).parent().data("status").toLowerCase();f!==e&&h.updateProspectStatus(c,f)}else"driver"===d&&h.filterProspectData(c).then(function(d){h.getCarId(b.item).then(function(b){d.carId=b,g.post("/api/drivers",d).then(function(){g["delete"]("/api/prospects/"+c).then(function(){a.forceReload()},function(a){console.error(a)})},function(a){console.error(a)})})})}}))}),h.getCarListElem().then(function(a){h.sortableConfigs.push(new Sortable(a,{group:"cars",draggable:"div.car",handle:".drag-handle-car",animation:150})),h.getDriverListElems().then(function(a){[].forEach.call(a,function(a){h.sortableConfigs.push(new Sortable(a,{group:{name:"drivers",put:["prospects","drivers"]},draggable:"tr",handle:".drag-handle",animation:150,onEnd:function(a){var b=angular.element(a.item).data("id"),c=angular.element(a.item).parent().data("list");if("driver"===c){var d=angular.element(a.item).data("currentcarid"),e=angular.element(a.item).parent().data("carid");d!==e&&h.updateDriverAssignment(b,d,e)}}}))})})})})})}]),angular.module("clientApp").factory("dataService",["$http","$q",function(a,b){return{getAss:function(){var c=a.get("/api/assignments"),d=d||b.defer();return c.then(function(a){d.resolve(a)},function(a){d.reject(a)}),d.promise},getDrivers:function(){var c=a.get("/api/assignments/drivers"),d=d||b.defer();return c.then(function(a){d.resolve(a)},function(a){d.reject(a)}),d.promise},getCars:function(){return a.get("/api/assignments/cars").success(function(a){return a}).error(function(a){console.error(a)})},getPtgLogs:function(){return a.get("/api/logs/ptg").success(function(a){return a}).error(function(a){console.error(a)})},getGasCards:function(){return a.get("/api/assets/gas-cards").success(function(a){return a}).error(function(a){console.error(a)})},getEzPasses:function(){return a.get("/api/assets/ez-passes").success(function(a){return a}).error(function(a){console.error(a)})},getProspects:function(){return a.get("/api/prospects").success(function(a){return a}).error(function(a){console.error(a)})},getMaintenanceLogs:function(){return a.get("/api/logs/maintenance").success(function(a){return a}).error(function(a){console.error(a)})}}}]),angular.module("clientApp").controller("PtgCtrl",["$state","$scope","$window","getPtgLogs","basicDriverData","$http",function(a,b,c,d,e,f){var g=c._;b.logs=d.data.logs,b.mostRecentDateInMs=d.data.mostRecentDateInMs,b.drivers=e.data;const h=6048e5;this.calculatePayout=function(a){var c=a.payout;if("number"==typeof a.uberRevenue&&"number"==typeof a.tollCosts&&"number"==typeof a.gasCosts){var d=g.filter(b.drivers,function(b){return a.driverId===b.id}),e=Math.round((a.uberRevenue-a.tollCosts)*d[0].payRate*.01-a.gasCosts/2);"number"==typeof a.deposit&&(e-=a.deposit),"number"==typeof a.additions&&(e+=a.additions),"number"==typeof a.subtractions&&(e-=a.subtractions),c!==e&&(a.payout=e,b.updateLog(a))}else console.log("uberRevenue or tollCosts or gasCosts invalid")},this.calculateProfit=function(a){var c=a.profit;if("number"==typeof a.uberRevenue&&"number"==typeof a.tollCosts&&"number"==typeof a.gasCosts){var d=g.filter(b.drivers,function(b){return a.driverId===b.id}),e=Math.round((a.uberRevenue-a.tollCosts)*(1-.01*d[0].payRate)-a.gasCosts/2-a.additions);"number"==typeof a.deposit&&(e-=a.deposit),"number"==typeof a.additions&&(e+=a.additions),"number"==typeof a.subtractions&&(e-=a.subtractions),c!==e&&(a.profit=e,b.updateLog(a))}else console.log("uberRevenue or tollCosts or gasCosts invalid")},this.newLog=function(){var c=b.mostRecentDateInMs+h,d=new Date(c);f.post("/api/logs/ptg",{dateInMs:c,date:d}).then(function(){setTimeout(function(){a.forceReload()},1e3)})["catch"](function(a){console.error(a)})},b.updateLog=function(a){f.put("/api/logs/drivers/"+a.id,{uberRevenue:a.uberRevenue,tollCosts:a.tollCosts,gasCosts:a.gasCosts,deposit:a.deposit,hours:a.hours,acceptRate:a.acceptRate,payout:a.payout,additions:a.additions,subtractions:a.subtractions,profit:a.profit}).success(function(){}).error(function(a){console.error(a)})}}]),angular.module("clientApp").factory("ptgLogSettingsService",function(){var a={ptgLog:{period:{value:1,unit:"week"}}};return{getSettings:function(){return a},setSettings:function(b){a=b}}}),angular.module("clientApp").directive("repeatFinished",function(){return function(a){a.$last&&a.status===a.prospectStatuses[a.prospectStatuses.length-1]&&a.$emit("repeatFinished")}}),angular.module("clientApp").controller("ProspectFormModalCtrl",["$scope","$modal",function(a,b){a.formData={},a.animationsEnabled=!0,a.open=function(c){var d=b.open({animation:a.animationsEnabled,templateUrl:"views/newprospectformmodal.html",controller:"ProspectFormModalInstanceCtrl",size:c});d.result.then(function(b){a.formData=b},function(){console.log("Modal dismissed at: "+new Date)})}}]),angular.module("clientApp").controller("ProspectFormModalInstanceCtrl",["$state","$http","$scope","$modalInstance",function(a,b,c,d){c.prospectStatuses=["Callers","Interviewed","Waiting List","Rejected"],c.formData={},c.submit=function(){" - "===c.formData.status&&(c.formData.status="Callers"),c.formData.status&&(c.formData.status=c.formData.status.toLowerCase()),c.formData.middleInitial&&(c.formData.middleInitial=c.formData.middleInitial.toUpperCase()),c.formData.givenName=c.formData.givenName.charAt(0).toUpperCase()+c.formData.givenName.substr(1).toLowerCase(),c.formData.surName=c.formData.surName.charAt(0).toUpperCase()+c.formData.surName.substr(1).toLowerCase(),b.post("/api/prospects",c.formData).then(function(){c.reset()},function(a){console.error(a)})},c.reset=function(){c.formData={},c.prospectForm.$setPristine(),c.prospectForm.$setUntouched(),a.forceReload()},c.close=function(){d.dismiss("cancel")}}]),angular.module("clientApp").controller("CarFormModalCtrl",["$scope","$modal","dataService",function(a,b,c){a.formData={},a.animationsEnabled=!0,a.open=function(c){var d=b.open({animation:a.animationsEnabled,templateUrl:"views/carformmodal.html",controller:"CarFormModalInstanceCtrl",size:c,resolve:{getDrivers:["dataService",function(a){return a.getDrivers()}],getMaintenanceLogs:["dataService",function(a){return a.getMaintenanceLogs()}]}});d.result.then(function(b){a.formData=b},function(){console.log("Modal dismissed at: "+new Date)})}}]),angular.module("clientApp").controller("CarFormModalInstanceCtrl",["$state","getMaintenanceLogs","getDrivers","$http","$scope","$modalInstance",function(a,b,c,d,e,f){e.formData={},e.drivers=c.data,e.formData.dateInMs=b.data.mostRecentDateInMs,e.formData.date=new Date(e.formData.dateInMs),e.submit=function(){e.formData.licensePlateNumber=e.formData.licensePlateNumber.toUpperCase(),d.post("/api/cars",e.formData).then(function(){e.reset()},function(a){console.error(a)})},e.reset=function(){e.formData={},e.carForm.$setPristine(),e.carForm.$setUntouched(),a.forceReload()},e.close=function(){a.forceReload(),f.dismiss("cancel")}}]),angular.module("clientApp").controller("PayRateModalCtrl",["$scope","$modal",function(a,b){a.animationsEnabled=!0,a.open=function(c){var d=b.open({animation:a.animationsEnabled,templateUrl:"views/payRateModal.html",controller:"PayRateModalInstanceCtrl",size:c});d.result.then(function(b){a.payRate=b},function(){console.log("Modal dismissed at: "+new Date)})}}]),angular.module("clientApp").controller("PayRateModalInstanceCtrl",["$scope","$modalInstance",function(a,b){document.onkeypress=function(b){b=b||window.event,13!==b.charCode||a.payRateForm.$invalid||a.submit()},a.submit=function(){b.close(a.payRate)},a.close=function(){b.dismiss("cancel")}}]),angular.module("clientApp").controller("MaintenanceLogsCtrl",["$state","$http","getMaintenanceLogs","basicCarData",function(a,b,c,d){this.logs=c.data.logs,this.mostRecentDateInMs=c.data.mostRecentDateInMs,this.cars=d.data;const e=6048e5;this.newLog=function(){var c=this.mostRecentDateInMs+e,d=new Date(c);b.post("/api/logs/maintenance",{date:d,dateInMs:c}).then(function(){setTimeout(function(){a.forceReload()},1e3)})["catch"](function(a){console.error(a)})},this.updateLog=function(a){b.put("/api/logs/cars/"+a.id,{mileage:a.mileage,note:a.note,tlcNumber:a.tlcNumber}).success(function(){}).error(function(a){console.error(a)})}}]),angular.module("clientApp").controller("DriverFormModalCtrl",["$scope","$modal","dataService",function(a,b,c){a.animationsEnabled=!0,a.open=function(c){var d=b.open({animation:a.animationsEnabled,templateUrl:"views/driverformmodal.html",controller:"DriverFormModalInstanceCtrl",size:c,resolve:{getCars:["dataService",function(a){return a.getCars()}]}});d.result.then(function(b){a.formData=b},function(){console.log("Modal dismissed at: "+new Date)})}}]),angular.module("clientApp").controller("DriverFormModalInstanceCtrl",["$state","getCars","$http","$scope","$modalInstance",function(a,b,c,d,e){d.formData={},d.cars=b.data,d.submit=function(){d.formData.middleInitial&&(d.formData.middleInitial=d.formData.middleInitial.toUpperCase()),d.formData.givenName=d.formData.givenName.charAt(0).toUpperCase()+d.formData.givenName.substr(1).toLowerCase(),d.formData.surName=d.formData.surName.charAt(0).toUpperCase()+d.formData.surName.substr(1).toLowerCase(),d.formData.payRate=d.formData.payRate.toString(),c.post("/api/drivers",d.formData).then(function(){d.reset()},function(a){console.error(a)})},d.reset=function(){d.formData={},d.driverForm.$setPristine(),d.driverForm.$setUntouched(),a.forceReload()},d.close=function(){e.dismiss("cancel")}}]),angular.module("clientApp").controller("CardFormModalCtrl",["$scope","$modal",function(a,b){a.formData={},a.animationsEnabled=!0,a.open=function(c){var d=b.open({animation:a.animationsEnabled,templateUrl:"views/cardformmodal.html",controller:"CardFormModalInstanceCtrl",size:c});d.result.then(function(b){a.formData=b},function(){console.log("Modal dismissed at: "+new Date)})}}]),angular.module("clientApp").controller("CardFormModalInstanceCtrl",["$state","$http","$scope","$modalInstance",function(a,b,c,d){c.animationsEnabled=!0,c.formData={},c.routeFor={"Gas Card":"gas-cards","EZ Pass":"ez-passes"},c.typeNames=Object.keys(c.routeFor),c.submit=function(){b.post("/api/assets/"+c.routeFor[c.formData.type],c.formData).then(function(){c.reset()},function(a){console.error(a)})},c.reset=function(){c.formData={},c.cardForm.$setPristine(),c.cardForm.$setUntouched(),a.forceReload()},c.close=function(){c.reset(),d.dismiss("cancel")}}]),angular.module("clientApp").controller("LogoutCtrl",["$state",function(a){setTimeout(function(){a.go("login")},3e3)}]),angular.module("clientApp").controller("PersonEditFormModalCtrl",["$scope","$modal","dataService",function(a,b,c){a.person={},a.animationsEnabled=!0,a.open=function(c,d,e){a.person.data=d,a.person.type=e;var f=b.open({animation:a.animationsEnabled,templateUrl:"views/personEditFormModal.html",controller:"PersonEditFormModalInstanceCtrl",size:c,resolve:{getGasCards:["dataService",function(a){return a.getGasCards()}],getEzPasses:["dataService",function(a){return a.getEzPasses()}],getPerson:function(){return a.person},getCars:["dataService",function(a){return a.getCars()}]}});f.result.then(function(b){a.formData=b},function(){console.log("Modal dismissed at: "+new Date)})}}]),angular.module("clientApp").controller("PersonEditFormModalInstanceCtrl",["$http","$scope","$modalInstance","getPerson","getGasCards","getEzPasses","getCars","$state",function(a,b,c,d,e,f,g,h){b.formData=d.data,b.typeOfPerson=d.type,b.gasCards=e.data,b.ezPasses=f.data,b.cars=g.data,b.prospectStatuses=["Callers","Interviewed","Waiting List","Rejected"],b.submit=function(){var c=b.typeOfPerson.toLowerCase(),d=b.formData.id;b.formData.middleInitial&&(b.formData.middleInitial=b.formData.middleInitial.toUpperCase()),b.formData.givenName&&(b.formData.givenName=b.formData.givenName.charAt(0).toUpperCase()+b.formData.givenName.substr(1).toLowerCase()),b.formData.surName&&(b.formData.surName=b.formData.surName.charAt(0).toUpperCase()+b.formData.surName.substr(1).toLowerCase());var e={givenName:b.formData.givenName,middleInitial:b.formData.middleInitial,surName:b.formData.surName,driversLicenseNum:b.formData.driversLicenseNum,phoneNumber:b.formData.phoneNumber,email:b.formData.email,address:b.formData.address,tlc:b.formData.tlc,dmv:b.formData.dmv,points:b.formData.points,accidents:b.formData.accidents,shift:b.formData.shift,paperwork:b.formData.paperwork,description:b.formData.description};"driver"===c?(b.formData.payRate&&(e.payRate=b.formData.payRate.toString()),b.formData.ezPassId&&(e.ezPassId=b.formData.ezPass.id),b.formData.gasCardId&&(e.gasCardId=b.formData.gasCard.id),b.formData.carId&&(e.carId=b.formData.car.id)):"prospect"===c?b.formData.status&&(e.status=b.formData.status.toLowerCase()):console.error("What type of person is this?!"),a.put("/api/"+c+"s/"+d,e).then(function(){b.close(),setTimeout(function(){h.forceReload()},1e3)},function(a){console.error(a)})},b.reset=function(){b.formData=d.data,b.personEditForm.$setPristine(),b.personEditForm.$setUntouched()},b.close=function(){h.forceReload(),c.dismiss("cancel")}}]),angular.module("clientApp").run(["$templateCache",function(a){a.put("views/cardformmodal.html",'<link rel="stylesheet" href="styles/forms.scss"> <div class="modal-header"> <h3 class="modal-title">Add Card</h3> <button type="button" class="close" ng-click="close()" style="margin-top:-35px">&times;</button> </div> <div class="modal-body"> <form novalidate role="form" id="newCardForm" name="cardForm"> <div class="form-rules clearfix"> <p style="float: right"> <span style="color:#ff0000">* </span>Required </p> </div> <!-- givenName VALIDATION --> <div class="error-message bg-danger" ng-messages="cardForm.type.$error" ng-if="cardForm.type.$dirty" role="alert"> <div ng-messages-include="views/formMessages/card.html"></div> </div> <div class="form-group"> <label for="type"> <span style="color:#ff0000">* </span>Type </label> <select name="type" class="form-control" ng-model="formData.type"> <option ng-repeat="type in typeNames" value="{{ type }}">{{ type }} </option> </select> </div> <!-- givenName VALIDATION --> <div class="error-message bg-danger" ng-messages="cardForm.number.$error" ng-if="cardForm.number.$dirty" role="alert"> <div ng-messages-include="views/formMessages/card.html"></div> </div> <div class="form-group"> <label for="number"> <span style="color:#ff0000">* </span>Number </label> <input name="number" type="text" class="form-control" ng-model="formData.number" placeholder="ex. 642190" ng-required="true"> </div> <div class="form-group" ng-show="formData.type === \'Gas Card\'"> <label for="name">Name</label> <input name="name" type="text" class="form-control" ng-model="formData.name"> </div> </form> </div> <div class="modal-footer"> <button class="btn btn-success" type="button" ng-click="submit()" ng-disabled="cardForm.$invalid">Submit</button> <button class="btn btn-danger" type="button" ng-click="reset()">Reset</button> <button class="btn btn-default" type="button" ng-click="close()">Close</button> </div>'),a.put("views/carformmodal.html",'<link rel="stylesheet" href="styles/forms.scss"> <div class="modal-header"> <h3 class="modal-title">Add Car</h3> <button type="button" class="close" ng-click="close()" style="margin-top:-35px"> &times; </button> </div> <div class="modal-body"> <form novalidate role="form" id="newCarForm" name="carForm" ng-submit="submit()"> <div class="form-rules clearfix"> <p style="float: right"> <span style="color:#ff0000">* </span>Required </p> </div> <!-- licensePlate validation --> <div class="error-message bg-danger" ng-messages="carForm.licensePlateNumber.$error" ng-if="carForm.licensePlateNumber.$dirty" role="alert"> <div ng-messages-include="views/formMessages/licensePlate.html"></div> </div> <div class="form-group"> <label for="licensePlateNumber"> <span style="color:#ff0000">* </span>License Plate </label> <input name="licensePlateNumber" type="text" class="form-control" ng-model="formData.licensePlateNumber" placeholder="ex. T5728292C" ng-pattern="/^[a-zA-Z0-9]{6,8}$/" ng-required="true"> </div> <!-- licenseNumber validation --> <div class="error-message bg-danger" ng-messages="carForm.tlcNumber.$error" ng-if="carForm.tlcNumber.$dirty" role="alert"> <div ng-messages-include="views/formMessages/licenseNumber.html"></div> </div> <div class="form-group"> <label for="tlcNumber">TLC Number</label> <input name="tlcNumber" type="text" placeholder="ex. 5571653" class="form-control" ng-model="formData.tlcNumber" ng-pattern="/^([a-zA-Z0-9]){4,7}$/"> </div> <!-- licensePlate validation --> <div class="error-message bg-danger" ng-messages="carForm.mileage.$error" ng-if="carForm.mileage.$dirty" role="alert"> <div ng-messages-include="views/formMessages/mileage.html"></div> </div> <div class="form-group"> <label for="mileage"> <span style="color:#ff0000">* </span>Mileage </label> <input name="mileage" type="text" class="form-control" ng-model="formData.mileage" placeholder="ex. 50000" ng-required="true" ng-pattern="/^\\d+$/"> </div> <div class="form-group"> <label for="driver">Driver</label> <select class="form-control" ng-model="formData.driverId" placeholder="Select Driver"> <option> - </option> <option ng-repeat="driver in drivers" value="{{ driver.id }}">{{ driver.givenName }} {{ driver.surName }}</option> </select> </div> <div class="form-group"> <label for="description">Description</label> <textarea ng-model="formData.description" type="text" class="form-control" rows="5">\n            </textarea> </div> </form> </div> <div class="modal-footer"> <button class="btn btn-success" type="button" ng-click="submit()" ng-disabled="carForm.$invalid">Submit</button> <button class="btn btn-danger" type="button" ng-click="reset()">Reset</button> <button class="btn btn-default" type="button" ng-click="close()">Close</button> </div>'),a.put("views/customlogintpl.html",'<div class="col-xs-12"> <form class="form-horizontal" ng-hide="accepted" ng-submit="submit()" style> <div class="form-group"> <label class="col-xs-12 col-sm-4 control-label" for="spEmail">Email</label> <div class="col-xs-12 col-sm-4"> <input class="form-control" id="spUsername" placeholder="Email" ng-model="formModel.username" ng-disabled="posting" style> </div> </div> <div class="form-group"> <label class="col-xs-12 col-sm-4 control-label" for="spPassword">Password</label> <div class="col-xs-12 col-sm-4"> <input class="form-control" id="spPassword" placeholder="Password" type="password" ng-model="formModel.password" ng-disabled="posting" style> </div> </div> <div class="form-group"> <div class="col-sm-offset-4 col-sm-4"> <p class="text-danger" ng-show="error" ng-bind="error"></p> <button class="btn btn-success" type="submit" ng-disabled="posting"> Login </button> <!-- <a ui-sref=\'passwordResetRequest\' class="pull-right">Forgot Password</a> --> </div> </div> </form> </div>'),a.put("views/customregistrationtpl.html",'<!-- Not working for some reason --><!-- <link rel="stylesheet" href="styles/partials/_registration.scss"> --> <div class="col-xs-12"> <p id="postRegistrationAlert" class="alert bg-success" ng-show="creating || created"> Your account has been created. <a ui-sref="login"><strong>Login here</strong></a>. </p> <form name="registration" class="form-horizontal" ng-hide="creating || (created && !authenticating)" ng-submit="submit()" style> <div> <p> <span style="color:#ff0000">* </span>Required </p> </div> <div class="form-group"> <label class="col-xs-12 col-sm-4 control-label" for="spFirstName"> <span style="color:#ff0000">* </span>First Name </label> <div class="col-xs-12 col-sm-4"> <input name="givenName" class="form-control" id="spFirstName" ng-model="formModel.givenName" ng-disabled="creating" placeholder="First" style required> </div> </div> <div class="form-group"> <label class="col-xs-12 col-sm-4 control-label" for="spLastName"> <span style="color:#ff0000">* </span>Last Name </label> <div class="col-xs-12 col-sm-4"> <input name="surname" class="form-control" id="spLastName" placeholder="Last" ng-model="formModel.surname" ng-disabled="creating" required> </div> </div> <div class="form-group"> <label class="col-xs-12 col-sm-4 control-label" for="spOrganization"> Organization </label> <div class="col-xs-12 col-sm-4"> <input name="organization" class="form-control" id="spOrganization" placeholder="ex. XYZ LLC" ng-model="formModel.customData.organization" ng-disabled="creating" required> </div> </div> <div class="form-group"> <label class="col-xs-12 col-sm-4 control-label" for="spEmail"> <span style="color:#ff0000">* </span>Email </label> <div class="col-xs-12 col-sm-4"> <input name="email" class="form-control" id="spEmail" placeholder="Email" ng-model="formModel.email" ng-disabled="creating" required> </div> </div> <div class="form-group"> <label class="col-xs-12 col-sm-4 control-label" for="spPassword"> <span style="color:#ff0000">* </span>Password </label> <div class="col-xs-12 col-sm-4"> <input name="password" class="form-control" id="spPassword" placeholder="Password" type="password" ng-model="formModel.password" ng-disabled="creating" required> </div> </div> <div class="form-group"> <div class="col-sm-offset-4 col-sm-4"> <p class="alert alert-danger ng-binding ng-hide" ng-show="error" ng-bind="error"></p> <button class="btn btn-success" type="submit" ng-disabled="creating"> Register </button> </div> </div> <!-- angular validation for organization field --> <!-- everything else is handled by stormpath --> <div ng-messages="registration.givenName.$error" role="alert" ng-show="registration.givenName.$touched"> <div ng-message="required"></div> </div> <div ng-messages="registration.surname.$error" role="alert" ng-show="registration.surname.$touched"> <div ng-message="required"></div> </div> <div ng-messages="registration.email.$error" role="alert" ng-show="registration.email.$touched"> <div ng-message="required"></div> </div> <div ng-messages="registration.password.$error" role="alert" ng-show="registration.password.$touched"> <div ng-message="required"></div> </div> </form> </div>'),a.put("views/driverformmodal.html",'<link rel="stylesheet" href="styles/forms.scss"> <div class="modal-header"> <h3 class="modal-title">Add Driver</h3> <button type="button" class="close" ng-click="close()" style="margin-top:-35px"> &times; </button> </div> <div class="modal-body"> <form novalidate role="form" id="newDriverForm" name="driverForm" ng-submit="submit()"> <div class="form-rules clearfix"> <p style="float: right"> <span style="color:#ff0000">* </span>Required </p> </div> <!-- givenName VALIDATION --> <div class="error-message bg-danger" ng-messages="driverForm.givenName.$error" ng-if="driverForm.givenName.$dirty" role="alert"> <div ng-messages-include="views/formMessages/givenName.html"></div> </div> <div class="form-group"> <label for="givenName"> <span style="color:#ff0000">* </span>First </label> <input name="givenName" type="text" class="form-control" ng-model="formData.givenName" placeholder="John" ng-minlength="2" ng-maxlength="16" ng-pattern="/^[a-zA-Z]*$/" ng-required="true"> </div> <div class="form-group"> <label for="middleInitial">Middle</label> <input name="middleInitial" type="text" class="form-control" ng-model="formData.middleInitial" placeholder="H"> </div> <!-- surName Validation --> <div class="error-message bg-danger" ng-messages="driverForm.surName.$error" ng-if="driverForm.surName.$dirty" role="alert"> <div ng-messages-include="views/formMessages/surName.html"></div> </div> <div class="form-group"> <label for="surName"> <span style="color:#ff0000">* </span>Last </label> <input name="surName" type="text" class="form-control" ng-model="formData.surName" placeholder="Doe" ng-minlength="2" ng-maxlength="16" ng-pattern="/^[a-zA-Z]*$/" ng-required="true"> </div> <!-- email validation --> <div class="error-message bg-danger" ng-messages="driverForm.email.$error" ng-if="driverForm.email.$dirty" role="alert"> <div ng-messages-include="views/formMessages/email.html"></div> </div> <div class="form-group"> <label for="email">Email</label> <input name="email" type="email" class="form-control" ng-model="formData.email" placeholder="xyz@email.com" ng-pattern="/^[^\\s@]+@[^\\s@]+\\.[^\\s@]{2,}$/"> </div> <!-- phone number validation --> <div class="error-message bg-danger" ng-messages="driverForm.phoneNumber.$error" ng-if="driverForm.phoneNumber.$dirty" role="alert"> <div ng-messages-include="views/formMessages/phone.html"></div> </div> <div class="form-group"> <label for="phoneNumber">Phone Number</label> <input name="phoneNumber" type="text" class="form-control" ng-model="formData.phoneNumber" placeholder="ex. 123-456-7890" ng-pattern="/^1?[-\\. ]?(\\(\\d{3}\\)?[-\\. ]?|\\d{3}?[-\\. ]?)?\\d{3}?[-\\. ]?\\d{4}$/"> </div> <div class="form-group"> <label for="address">Address</label> <input type="text" class="form-control" ng-model="formData.address" placeholder> </div> <div class="form-group"> <label for="driversLicenseNum">Driver License Number</label> <input type="text" class="form-control" ng-model="formData.driversLicenseNum" placeholder> </div> <div class="form-group"> <label for="tlc">TLC</label> <input type="text" class="form-control" ng-model="formData.tlc"> </div> <div class="form-group"> <label for="dmv">DMV</label> <input type="text" class="form-control" ng-model="formData.dmv"> </div> <div class="form-group"> <label for="points">Points</label> <input type="text" class="form-control" ng-model="formData.points"> </div> <div class="form-group"> <label for="accidents">Accidents</label> <input type="text" class="form-control" ng-model="formData.accidents"> </div> <div class="form-group"> <label for="shift">Shift</label> <input type="text" class="form-control" ng-model="formData.shift"> </div> <div class="form-group"> <label for="paperwork">Paperwork</label> <input type="text" class="form-control" ng-model="formData.paperwork"> </div> <!-- payRate validation --> <div class="error-message bg-danger" ng-messages="driverForm.payRate.$error" ng-if="driverForm.payRate.$dirty" role="alert"> <div ng-messages-include="views/formMessages/payRate.html"></div> </div> <div class="form-group"> <label for="payRate"> <span style="color:#ff0000">* </span>Pay Rate (%) </label> <input name="payRate" type="text" class="form-control" ng-model="formData.payRate" placeholder="0-100" ng-required="true" ng-pattern="/^(0|[1-9][0-9]?$|^100)$/"> </div> <div class="form-group"> <label for="car">Car</label> <select class="form-control" ng-model="formData.carId"> <option> - </option> <option ng-repeat="car in cars" value="{{ car.id }}">{{ car.tlcNumber }}</option> </select> </div> <label for="description">Description</label> <textarea ng-model="formData.description" type="text" class="form-control" rows="5">\n        </textarea> </form> </div> <div class="modal-footer"> <button class="btn btn-success" type="button" ng-click="submit()" ng-disabled="driverForm.$invalid">Submit</button> <button class="btn btn-danger" type="button" ng-click="reset()">Reset</button> <button class="btn btn-default" type="button" ng-click="close()">Close</button> </div>'),
a.put("views/formMessages/card.html",'<link rel="stylesheet" href="styles/formErrors.scss"> <div class="error-message" ng-message="required"> Please fill out this field. </div> <div class="error-message" ng-message="pattern"> Number must be numeric and 6 characters long. </div>'),a.put("views/formMessages/email.html",'<link rel="stylesheet" href="styles/formErrors.scss"> <div class="error-message" ng-message="pattern"> Please enter a valid Email address. </div>'),a.put("views/formMessages/givenName.html",'<link rel="stylesheet" href="styles/formErrors.scss"> <div class="error-message" ng-message="required"> You did not enter a First Name. </div> <div class="error-message" ng-message="minlength"> First Name must be at least 2 characters long. </div> <div class="error-message" ng-message="maxlength"> First Name cannot be more than 16 characters long. </div> <div class="error-message" ng-message="pattern"> First Name must contain only alphabetic characters and cannot contain whitespace. </div>'),a.put("views/formMessages/licenseNumber.html",'<link rel="stylesheet" href="styles/formErrors.scss"> <div class="error-message" ng-message="pattern"> License Number must be alphanumeric and between 4-7 characters long. </div>'),a.put("views/formMessages/licensePlate.html",'<link rel="stylesheet" href="styles/formErrors.scss"> <div class="error-message" ng-message="required"> You did not enter a License Plate. </div> <div class="error-message" ng-message="pattern"> License Plate must be alphanumeric and 6-8 characters long. </div>'),a.put("views/formMessages/mileage.html",'<link rel="stylesheet" href="styles/formErrors.scss"> <div class="error-message" ng-message="required"> You did not enter a Mileage. </div> <div class="error-message" ng-message="pattern"> Mileage must be numeric. </div>'),a.put("views/formMessages/payRate.html",'<link rel="stylesheet" href="styles/formErrors.scss"> <div class="error-message" ng-message="required"> You did not enter a Pay Rate. </div> <div class="error-message" ng-message="pattern"> Please enter an integer between 0-100. </div>'),a.put("views/formMessages/phone.html",'<link rel="stylesheet" href="styles/formErrors.scss"> <div class="error-message" ng-message="pattern"> Phone Number must contain 10 numeric digits. ex. 123-456-7890 </div>'),a.put("views/formMessages/surName.html",'<link rel="stylesheet" href="styles/formErrors.scss"> <div class="error-message" ng-message="required"> You did not enter a Last Name. </div> <div class="error-message" ng-message="minlength"> Last Name must be at least 2 characters long. </div> <div class="error-message" ng-message="maxlength"> Last Name cannot be more than 16 characters long. </div> <div class="error-message" ng-message="pattern"> Last Name must contain only alphabetic characters and cannot contain whitespace. </div>'),a.put("views/login.html",'<div class="container"> <div class="row"> <div class="col-xs-12"> <h3>Login</h3> <hr> </div> </div> <div sp-login-form template-url="/views/customlogintpl.html"></div> <div class="row"> <div class="col-xs-12"> <h5>Don\'t have an account?</h5> <a ui-sref="register">Register Here</a> </div> </div> </div>'),a.put("views/logout.html",'<div class="container"> <div class="row"> <div class="col-xs-12"> <h3>You are now logged out.</h3> <a ui-sref="login">Redirecting in 3 seconds...</a> </div> </div> </div>'),a.put("views/main.html",'<!-- Collapsed car list becomes a button --> <div class="col-md-offset-2 col-md-1 col-collapsed" ng-show="driverListCollapsed" ng-click="reload()" type="button"> <div class="row row-collapsed"> <p class="fa fa-caret-right fa-3x btn-expand"></p> </div> </div> <!-- Collapsed prospect list becomes a button --> <div class="col-md-offset-11 col-md-1 col-collapsed" ng-show="prospectListCollapsed" ng-click="reload()" type="button"> <div class="row row-collapsed"> <p class="fa fa-caret-left fa-3x btn-expand"></p> </div> </div> <div ng-class="{ \'col-md-9\' : prospectListCollapsed, \'col-md-5\' : !prospectListCollapsed  }" class="col-md-offset-2 col-collapsible" id="car-list" ng-model="cars" collapse="driverListCollapsed" if-user> <h2 class="sub-header"> Cars <span class="btn-collapse" ng-show="!prospectListCollapsed"> <i class="fa fa-caret-left btn-collapse" type="button" ng-click="driverListCollapsed = !driverListCollapsed"></i> </span> </h2> <div class="btn-group car-list-actions"> <button type="button" class="btn btn-success dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> + <span class="caret"></span> </button> <ul class="dropdown-menu"> <li class="add-btn-li" ng-controller="CarFormModalCtrl" data-toggle="modal" ng-click="open(lg)"> Car </li> <li class="add-btn-li" ng-controller="DriverFormModalCtrl" data-toggle="modal" ng-click="open(lg)"> Driver </li> <li class="add-btn-li" ng-controller="CardFormModalCtrl" data-toggle="modal" ng-click="open(lg)"> Card/Pass </li> </ul> <!-- <div class=\'col-md-1 add-btn\' ng-controller="CarFormModalCtrl">\n      <button type=\'button\' class=\'btn btn-success\' data-toggle=\'modal\' ng-click=\'open(lg)\'>+ Car</button>\n    </div>\n    <div class=\'col-md-1 add-btn\' ng-controller="DriverFormModalCtrl">\n      <button type=\'button\' class=\'btn btn-success\' data-toggle=\'modal\' ng-click=\'open(lg)\'>+ Driver</button>\n    </div>\n    <div class=\'col-md-1 add-btn\' ng-controller="CardFormModalCtrl">\n      <button type=\'button\' class=\'btn btn-success\' data-toggle=\'modal\' ng-click=\'open(lg)\'>+ Card/Pass</button>\n    </div> --> </div> <div class="table-responsive car" ng-repeat="car in cars"> <table class="table"> <tbody> <div class="table-responsive"> <table class="table"> <thead> <h3> <span class="drag-handle-car"> :: </span> <span ng-class="{\'bg-danger\' : car.oilChangeRequired}">{{ car.tlcNumber }}</span> <span> <button class="btn btn-xs btn-warning" ng-click="main.oilChanged(car.id)" ng-show="car.oilChangeRequired"> Oil Changed </button> </span> </h3> <th></th> <th>Name</th> <th>Gas Card</th> <th>EZ Pass</th> <th>Notes</th> <th>TLC</th> <th>DMV</th> <th>Points</th> <th>Accidents</th> <th>Shift</th> <th>Address</th> </thead> <tbody class="driver-list" data-list="driver" data-carid="{{ car.id }}" ng-model="car.Drivers"> <tr class="dropfix"> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> <tr class="person-row" ng-repeat="driver in car.Drivers" data-id="{{ driver.id }}" data-currentcarid="{{ car.id }}"> <td> <ul class="row-actions"> <li class="drag-handle">::</li> <li class="filler"> </li> <li type="button" class="fa fa-pencil-square-o" data-toggle="modal" ng-controller="PersonEditFormModalCtrl" ng-click="open(lg, driver, &quot;Driver&quot;)"></li> </ul> </td> <td> {{ driver.givenName }} {{ driver.middleInitial }} {{ driver.surName }} </td> <td> {{ driver.GasCards[0].number }} </td> <td> {{ driver.EzPasses[0].number }} </td> <td> {{ driver.description }} </td> <td> {{ driver.tlc }} </td> <td> {{ driver.dmv }} </td> <td> {{ driver.points }} </td> <td> {{ driver.accidents }} </td> <td> {{ driver.shift }} </td> <td> {{ driver.address }} </td> </tr> </tbody> </table> </div> </tbody> </table> </div> </div> <div ng-class="{ \'col-md-offset-3\' : driverListCollapsed, \'col-md-9\' : driverListCollapsed, \'col-md-5\' : !driverListCollapsed }" id="prospect-list" ng-model="prospects" collapse="prospectListCollapsed" class="col-collapsible" if-user> <h2 class="sub-header"> Prospects <span class="btn-collapse" ng-show="!driverListCollapsed"> <i class="fa fa-caret-right" type="button" ng-click="prospectListCollapsed = !prospectListCollapsed"></i> </span> </h2> <div class="row"> <div class="col-md-5 prospect-actions" ng-controller="ProspectFormModalCtrl"> <button type="button" class="btn btn-success" data-toggle="modal" ng-click="open(lg)">+ Prospect</button> </div> </div> <div class="table-responsive" ng-repeat="status in prospectStatuses"> <table class="table"> <thead> <h3>{{ status }}</h3> <th></th> <th>Name</th> <th>Notes</th> <th>TLC</th> <th>DMV</th> <th>Points</th> <th>Accidents</th> <th>Shift</th> <th>Address</th> </thead> <tbody class="prospect-status" data-status="{{ status }}" data-list="prospect"> <tr class="dropfix"> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> <td></td> </tr> <tr class="person-row" ng-repeat="prospect in prospects | filter:status" data-id="{{ prospect.id }}" data-status="{{ prospect.status }}" repeat-finished> <td> <ul class="row-actions"> <li class="drag-handle">::</li> <li class="filler"> </li> <li type="button" class="fa fa-pencil-square-o" data-toggle="modal" ng-controller="PersonEditFormModalCtrl" ng-click="open(lg, prospect, &quot;Prospect&quot;)"> </li> </ul> </td> <td> {{ prospect.givenName }} {{ prospect.middleInitial }}<span ng-show="prospect.middleInitial">.</span> {{ prospect.surName }} </td> <td> {{ prospect.description }} </td> <td> {{ prospect.tlc }} </td> <td> {{ prospect.dmv }} </td> <td> {{ prospect.points }} </td> <td> {{ prospect.accidents }} </td> <td> {{ prospect.shift }} </td> <td> {{ prospect.address }} </td> </tr> </tbody> </table> </div> </div>'),a.put("views/maintenanceLogs.html",'<link rel="stylesheet" href="styles/partials/_ptg.css"> <div class="col-md-10 col-md-offset-2 col-sm-offset-3"> <h1 class="page-header">Mileage Log</h1> <div class="sub-header"> <button class="btn btn-success" ng-click="maintenance.newLog()"> Add Row </button> </div> <div class="table-responsive"> <table class="table table-bordered table-striped table-hover"> <thead ng-model="maintenance.cars"> <tr> <td><strong>Week \\ Car</strong></td> <td ng-repeat="car in maintenance.cars | orderBy:\'id\'"> {{ car.tlcNumber }} </td> </tr> </thead> <tbody ng-model="maintenance.logs"> <tr ng-repeat="log in maintenance.logs | orderBy:\'-dateInMs\'"> <td> <span>{{ log.date | date : format : shortDate }}</span> <button class="btn btn-warning btn-xs edit-btn" ng-click="rowform.$show()" ng-show="!rowform.$visible"> Edit </button> <form editable-form name="rowform" ng-show="rowform.$visible" class="form-buttons form-inline" shown="false"> <button type="submit" ng-disabled="rowform.$waiting" class="btn btn-primary btn-xs"> Save </button> <button type="button" ng-disabled="rowform.$waiting" ng-click="rowform.$cancel()" class="btn btn-default btn-xs"> Cancel </button> </form> </td> <td class="log-tablecell" ng-repeat="car in log.CarLogs | orderBy:\'id\'"> <ul class="log"> <li> <p ng-show="rowform.$visible">Mileage: </p> <span editable-text="car.mileage" e-name="mileage" e-form="rowform" onaftersave="maintenance.updateLog(car)" e-required> Mileage: {{ car.mileage || \' \' }} </span> </li> <li class="li-notes"> <p ng-show="rowform.$visible">Notes: </p> <span class="note" editable-textarea="car.note" e-name="note" e-form="rowform" e-required> Notes: {{ car.note || \' \'}} </span> </li> </ul> </td> </tr> </tbody> </table> </div> </div>'),a.put("views/newprospectformmodal.html",'<link rel="stylesheet" href="styles/forms.scss"> <!-- Prospect form modal view --> <div class="modal-header"> <h3 class="modal-title">Add Prospect</h3> <button type="button" class="close" ng-click="close()" style="margin-top:-35px">&times;</button> </div> <div class="modal-body"> <form novalidate role="form" id="newProspectForm" name="prospectForm" ng-submit="submit()"> <div class="form-rules clearfix"> <p style="float: right"> <span style="color:#ff0000">* </span>Required </p> </div> <div class="form-group"> <label for="status">Status</label> <select class="form-control" ng-model="formData.status"> <option> - </option> <option ng-repeat="status in prospectStatuses" value="{{ status }}">{{ status }}</option> </select> </div> <!-- givenName VALIDATION --> <div class="error-message bg-danger" ng-messages="prospectForm.givenName.$error" ng-if="prospectForm.givenName.$dirty" role="alert"> <div ng-messages-include="views/formMessages/givenName.html"></div> </div> <div class="form-group"> <label for="givenName"> <span style="color:#ff0000">* </span>First </label> <input name="givenName" type="text" class="form-control" ng-model="formData.givenName" placeholder="John" ng-minlength="2" ng-maxlength="16" ng-pattern="/^[a-zA-Z]*$/" ng-required="true"> </div> <div class="form-group"> <label for="middleInitial"> Middle </label> <input name="middleInitial" type="text" class="form-control" ng-model="formData.middleInitial" placeholder="H"> </div> <!-- surName Validation --> <div class="error-message bg-danger" ng-messages="prospectForm.surName.$error" ng-if="prospectForm.surName.$dirty" role="alert"> <div ng-messages-include="views/formMessages/surName.html"></div> </div> <div class="form-group"> <label for="surName"> <span style="color:#ff0000">* </span>Last </label> <input name="surName" type="text" class="form-control" ng-model="formData.surName" placeholder="Doe" ng-minlength="2" ng-maxlength="16" ng-pattern="/^[a-zA-Z]*$/" ng-required="true"> </div> <!-- email validation --> <div class="error-message bg-danger" ng-messages="prospectForm.email.$error" ng-if="prospectForm.email.$dirty" role="alert"> <div ng-messages-include="views/formMessages/email.html"></div> </div> <div class="form-group"> <label for="email">Email</label> <input name="email" type="email" class="form-control" ng-model="formData.email" placeholder="xyz@email.com" ng-pattern="/^[^\\s@]+@[^\\s@]+\\.[^\\s@]{2,}$/"> </div> <!-- phone number validation --> <div class="error-message bg-danger" ng-messages="prospectForm.phoneNumber.$error" ng-if="prospectForm.phoneNumber.$dirty" role="alert"> <div ng-messages-include="views/formMessages/phone.html"></div> </div> <div class="form-group"> <label for="phoneNumber">Phone Number</label> <input name="phoneNumber" type="text" class="form-control" ng-model="formData.phoneNumber" placeholder="ex. 123-456-7890" ng-pattern="/^1?[-\\. ]?(\\(\\d{3}\\)?[-\\. ]?|\\d{3}?[-\\. ]?)?\\d{3}?[-\\. ]?\\d{4}$/"> </div> <div class="form-group"> <label for="address">Address</label> <input type="text" class="form-control" ng-model="formData.address" placeholder> </div> <div class="form-group"> <label for="driversLicenseNum">Driver License Number</label> <input type="text" class="form-control" ng-model="formData.driversLicenseNum" placeholder> </div> <div class="form-group"> <label for="tlc">TLC</label> <input type="text" class="form-control" ng-model="formData.tlc"> </div> <div class="form-group"> <label for="dmv">DMV</label> <input type="text" class="form-control" ng-model="formData.dmv"> </div> <div class="form-group"> <label for="points">Points</label> <input type="text" class="form-control" ng-model="formData.points"> </div> <div class="form-group"> <label for="accidents">Accidents</label> <input type="text" class="form-control" ng-model="formData.accidents"> </div> <div class="form-group"> <label for="shift">Shift</label> <input type="text" class="form-control" ng-model="formData.shift"> </div> <div class="form-group"> <label for="paperwork">Paperwork</label> <input type="text" class="form-control" ng-model="formData.paperwork"> </div> <label for="description">Description</label> <textarea ng-model="formData.description" type="text" class="form-control" rows="5">\n        </textarea> </form> </div> <div class="modal-footer"> <button class="btn btn-success" type="button" type="submit" ng-click="submit()" ng-disabled="prospectForm.$invalid">Submit</button> <button class="btn btn-danger" type="button" ng-click="reset()">Reset</button> <button class="btn btn-default" type="button" ng-click="close()">Close</button> </div>'),a.put("views/passwordreset.html",'<div class="container"> <div class="row"> <div class="col-xs-12"> <h3>Reset Your Password</h3> <hr> </div> </div> <div sp-password-reset-form></div> </div>'),a.put("views/passwordresetrequest.html",'<div class="container"> <div class="row"> <div class="col-xs-12"> <h3>Request Password Reset</h3> <hr> </div> </div> <div sp-password-reset-request-form></div> </div>'),a.put("views/payRateModal.html",'<link rel="stylesheet" href="styles/forms.scss"> <div class="modal-header"> <h3 class="modal-title">Enter Pay Rate</h3> <button type="button" class="close" ng-click="close()" style="margin-top:-35px">&times;</button> </div> <div class="modal-body"> <form novalidate role="form" name="payRateForm"> <div class="form-rules clearfix"> <p style="float: right"> <span style="color:#ff0000">* </span>Required </p> </div> <!-- payRate validation --> <div class="error-message bg-danger" ng-messages="payRateForm.payRate.$error" ng-if="payRateForm.payRate.$dirty" role="alert"> <div ng-messages-include="views/formMessages/payRate.html"></div> </div> <div class="form-group"> <label for="payRate"> <span style="color:#ff0000">* </span>Pay Rate (%) </label> <input name="payRate" type="text" class="form-control" ng-model="payRate" ng-required="true" ng-pattern="/^(0|[1-9][0-9]?$|^100)$/" placeholder="ex. 0-100"> </div> </form> </div> <div class="modal-footer"> <button class="btn btn-success" type="button" ng-click="submit()" ng-disabled="payRateForm.$invalid">Submit</button> <button class="btn btn-default" type="button" ng-click="close()">Close</button> </div>'),a.put("views/personEditFormModal.html",'<div class="modal-header"> <h3 class="modal-title"> Edit {{ typeOfPerson }} </h3> <button type="button" class="close" ng-click="close()" style="margin-top:-35px"> &times; </button> <div class="modal-body"> <form novalidate role="form" name="personEditForm"> <div class="form-group" ng-show="typeOfPerson === &quot;Prospect&quot;"> <label for="status">Status</label> <select class="form-control" ng-model="formData.status"> <option> - </option> <option ng-repeat="status in prospectStatuses" value="{{ status }}">{{ status }}</option> </select> </div> <div class="form-group" ng-show="typeOfPerson === &quot;Driver&quot;"> <label for="car">Car</label> <select type="text" class="form-control" ng-options="car.tlcNumber for car in cars" ng-model="formData.car"> </select> </div> <div class="form-group" ng-show="typeOfPerson === &quot;Driver&quot;"> <label for="gasCard">Gas Card</label> <select type="text" class="form-control" ng-options="card.number for card in gasCards" ng-model="formData.gasCard"> </select> </div> <div class="form-group" ng-show="typeOfPerson === &quot;Driver&quot;"> <label for="ezPass">EZ Pass</label> <select type="text" class="form-control" ng-options="pass.number for pass in ezPasses" ng-model="formData.ezPass"> </select> </div> <!-- payRate validation --> <div class="error-message bg-danger" ng-messages="personEditForm.payRate.$error" ng-if="personEditForm.payRate.$dirty" role="alert"> <div ng-messages-include="views/formMessages/payRate.html"></div> </div> <div class="form-group" ng-show="typeOfPerson === &quot;Driver&quot;"> <label for="payRate">Pay Rate</label> <input name="payRate" type="text" class="form-control" ng-model="formData.payRate" placeholder="ex. 0-100" ng-pattern="/^(0|[1-9][0-9]?$|^100)$/"> </div> <!-- givenName VALIDATION --> <div class="error-message bg-danger" ng-messages="personEditForm.givenName.$error" ng-if="personEditForm.givenName.$dirty" role="alert"> <div ng-messages-include="views/formMessages/givenName.html"></div> </div> <div class="form-group"> <label for="givenName">First</label> <input name="givenName" type="text" class="form-control" ng-model="formData.givenName" placeholder="John" ng-minlength="2" ng-maxlength="16" ng-pattern="/^[a-zA-Z]*$/"> </div> <div class="form-group"> <label for="middleInitial">Middle</label> <input type="text" class="form-control" ng-model="formData.middleInitial" placeholder="H"> </div> <!-- surName Validation --> <div class="error-message bg-danger" ng-messages="personEditForm.surName.$error" ng-if="personEditForm.surName.$dirty" role="alert"> <div ng-messages-include="views/formMessages/surName.html"></div> </div> <div class="form-group"> <label for="surName">Last</label> <input name="surName" type="text" class="form-control" ng-model="formData.surName" placeholder="Doe" ng-minlength="2" ng-maxlength="16" ng-pattern="/^[a-zA-Z]*$/"> </div> <!-- email validation --> <div class="error-message bg-danger" ng-messages="personEditForm.email.$error" ng-if="personEditForm.email.$dirty" role="alert"> <div ng-messages-include="views/formMessages/email.html"></div> </div> <div class="form-group"> <label for="email">Email</label> <input type="text" class="form-control" ng-model="formData.email" placeholder="xyz@email.com" ng-pattern="/^[^\\s@]+@[^\\s@]+\\.[^\\s@]{2,}$/"> </div> <!-- phone number validation --> <div class="error-message bg-danger" ng-messages="personEditForm.phoneNumber.$error" ng-if="personEditForm.phoneNumber.$dirty" role="alert"> <div ng-messages-include="views/formMessages/phone.html"></div> </div> <div class="form-group"> <label for="phoneNumber">Phone Number</label> <input type="text" class="form-control" ng-model="formData.phoneNumber" placeholder="ex. 123-456-7890" ng-pattern="/^1?[-\\. ]?(\\(\\d{3}\\)?[-\\. ]?|\\d{3}?[-\\. ]?)?\\d{3}?[-\\. ]?\\d{4}$/"> </div> <div class="form-group"> <label for="address">Address</label> <input type="text" class="form-control" ng-model="formData.address" placeholder="1600 Pennsylvania Ave NW, Washington, DC 20500"> </div> <div class="form-group"> <label for="driversLicenseNum">Driver License Number</label> <input type="text" class="form-control" ng-model="formData.driversLicenseNum" placeholder="123456789"> </div> <div class="form-group"> <label for="tlc">TLC</label> <input type="text" class="form-control" ng-model="formData.tlc"> </div> <div class="form-group"> <label for="dmv">DMV</label> <input type="text" class="form-control" ng-model="formData.dmv"> </div> <div class="form-group"> <label for="points">Points</label> <input type="text" class="form-control" ng-model="formData.points" placeholder="Number ex. 12"> </div> <div class="form-group"> <label for="accidents">Accidents</label> <input type="text" class="form-control" ng-model="formData.accidents" placeholder="Number ex. 0"> </div> <div class="form-group"> <label for="shift">Shift</label> <input type="text" class="form-control" ng-model="formData.shift" placeholder="24/7"> </div> <div class="form-group"> <label for="paperwork">Paperwork</label> <input type="text" class="form-control" ng-model="formData.paperwork"> </div> <label for="description">Notes</label> <textarea ng-model="formData.description" type="text" class="form-control" rows="5" placeholder="Upstanding guy.">\n      </textarea> </form> </div> <div class="modal-footer"> <button class="btn btn-success" type="button" ng-click="submit()" ng-disabled="personEditForm.$invalid">Submit</button> <button class="btn btn-danger" type="button" ng-click="reset()">Reset</button> <button class="btn btn-default" type="button" ng-click="close()">Close</button> </div> </div>'),a.put("views/ptg.html",'<link rel="stylesheet" href="styles/partials/_ptg.css"> <div class="col-md-10 col-md-offset-2 col-sm-offset-3"> <h1 class="page-header">Driver Payout Record</h1> <div class="sub-header"> <button class="btn btn-success" ng-click="ptg.newLog()"> Add Row </button> </div> <div class="table-responsive"> <table class="table table-bordered table-striped table-hover"> <thead ng-model="drivers"> <tr> <td><strong>Week \\ Driver</strong></td> <td ng-repeat="driver in drivers | orderBy:\'id\'">{{ driver.givenName }} {{driver.surName}}</td> </tr> </thead> <tbody ng-model="logs"> <tr ng-repeat="ptgLog in logs | orderBy:\'-dateInMs\'"> <td> <span>{{ ptgLog.date | date : format : shortDate }}</span> <button class="btn btn-warning btn-xs edit-btn" ng-click="rowform.$show()" ng-show="!rowform.$visible"> Edit </button> <form editable-form name="rowform" ng-show="rowform.$visible" class="form-buttons form-inline" shown="false"> <button type="submit" ng-disabled="rowform.$waiting" class="btn btn-primary btn-xs"> Save </button> <button type="button" ng-disabled="rowform.$waiting" ng-click="rowform.$cancel()" class="btn btn-default btn-xs"> Cancel </button> </form> </td> <td class="log-tablecell" ng-repeat="driver in ptgLog.DriverLogs | orderBy:\'driverId\'"> <!-- editable driver log (text with validation) --> <ul class="log"> <li> <p ng-show="rowform.$visible">Uber: $</p> <span editable-text="driver.uberRevenue" e-name="uberRevenue" e-form="rowform" onaftersave="updateLog(driver)" e-required> Uber: ${{ driver.uberRevenue || \' \' }} </span> </li> <li> <p ng-show="rowform.$visible">Tolls: $</p> <span editable-text="driver.tollCosts" e-name="tollCosts" e-form="rowform" e-required> Tolls: ${{ driver.tollCosts || \' \' }} </span> </li> <li> <p ng-show="rowform.$visible">Gas: $</p> <span editable-text="driver.gasCosts" e-name="gasCosts" e-form="rowform" e-required> Gas: ${{ driver.gasCosts || \' \' }} </span> </li> <li> <p ng-show="rowform.$visible">Deposit: $</p> <span editable-text="driver.deposit" e-name="deposit" e-form="rowform" e-required> Deposit: ${{ driver.deposit || \' \' }} </span> </li> <li> <p ng-show="rowform.$visible">Hours:</p> <span editable-text="driver.hours" e-name="hours" e-form="rowform" e-required> Hours: {{ driver.hours || \' \' }} </span> </li> <li> <p ng-show="rowform.$visible">Acceptance: %</p> <span editable-text="driver.acceptRate" e-name="acceptRate" e-form="rowform" e-required> Acceptance: {{ driver.acceptRate || \' \' }}% </span> </li> <li> <p ng-show="rowform.$visible">Additions: </p> <span editable-text="driver.additions" e-name="additions" e-form="rowform" e-required> Additions: ${{ driver.additions || \' \' }} </span> </li> <li> <p ng-show="rowform.$visible">Subtractions: </p> <span editable-text="driver.subtractions" e-name="subtractions" e-form="rowform" e-required> Subtractions: ${{ driver.subtractions || \' \' }} </span> </li> <li> <p ng-show="rowform.$visible">Payout: </p> <span editable-text="driver.payout" e-name="payout" e-form="rowform" e-required> Payout: ${{ driver.payout || \' \' }} <button type="button" class="btn btn-xs btn-info calculate" ng-click="ptg.calculatePayout(driver)">Calculate</button> </span> </li> <li> <p ng-show="rowform.$visible">Profit: </p> <span editable-text="driver.profit" e-name="profit" e-form="rowform" e-required> Profit: ${{ driver.profit || \' \' }} <button type="button" class="btn btn-xs btn-info calculate" ng-click="ptg.calculateProfit(driver)">Calculate</button> </span> </li> </ul> </td> </tr> </tbody> </table> </div> </div> <!-- ng-repeat="driverLog in ptgLog.DriverLogs | orderBy:\'driverLog.givenName\'" -->'),a.put("views/register.html",'<div class="container"> <div class="row"> <div class="col-xs-12"> <h3>Register</h3> <hr> </div> </div> <div sp-registration-form autologin="true" template-url="/views/customregistrationtpl.html"></div> <div class="row"> <div class="col-xs-12"> <h5>Already have an account?</h5> <a ui-sref="login">Login Here</a> </div> </div> </div>'),a.put("views/settings.html",'<h1 class="page-header">Settings</h1> <form novalidate role="form" id="settingsForm"> <div class="form-group"> <label for="logPeriod">PTG Log Period</label> <input type="text" class="form-control" ng-model="settings.ptgLogPeriod.value" length="5" size="5" placeholder="1-99"> <select ng-model="settings.ptgLogPeriod.unit"> <option value="days">Day(s)</option> <option value="weeks">Week(s)</option> <option value="months">Month(s)</option> </select> </div> <button type="submit" class="btn btn-success" ng-click="settings.apply()">Apply</button> </form> {{ settings.ptgLog }}')}]);